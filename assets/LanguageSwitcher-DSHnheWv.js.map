{"version":3,"file":"LanguageSwitcher-DSHnheWv.js","sources":["../../src/components/LanguageSwitcherBar/LanguageSwitcherBar.jsx","../../src/components/LanguageSwitcher/LanguageSwitcher.jsx"],"sourcesContent":["import { forwardRef, useEffect } from \"react\";\nimport css from \"./LanguageSwitcherBar.module.css\";\nimport { LOCALS } from \"../../i18n/constants\";\nimport i18next from \"i18next\";\n\nconst LanguageSwitcherBar = forwardRef(function LanguageSwitcherBar(\n  { onClose },\n  ref\n) {\n  const langs = Object.values(LOCALS);\n\n  const handleLanguageChange = (lng) => {\n    i18next.changeLanguage(lng);\n    onClose(false);\n  };\n\n  useEffect(() => {\n    window.addEventListener(\"click\", onClose);\n    return () => window.removeEventListener(\"click\", onClose);\n  }, [onClose, ref]);\n\n  return (\n    <ul className={css.barPopover} ref={ref}>\n      {langs.map((len) => (\n        <li key={len}>\n          <button\n            className={css.button}\n            onClick={() => handleLanguageChange(len)}\n          >\n            {len.toLocaleUpperCase()}\n          </button>\n        </li>\n      ))}\n    </ul>\n  );\n});\n\nexport default LanguageSwitcherBar;\n","import i18next from \"i18next\";\r\nimport { useRef, useState } from \"react\";\r\nimport css from \"./LanguageSwitcher.module.css\";\r\nimport clsx from \"clsx\";\r\nimport svgIcons from \"../../assets/icons.svg\";\r\nimport LanguageSwitcherBar from \"../LanguageSwitcherBar/LanguageSwitcherBar\";\r\nimport { LOCALS } from \"../../i18n/constants\";\r\nconst LanguageSwitcher = () => {\r\n  const [isDropdownOpen, setIsDropdownOpen] = useState(false);\r\n  const barPopoverRef = useRef(null);\r\n\r\n  const lanString = (lan) => {\r\n    const langs = Object.values(LOCALS);\r\n    const isExist = langs.includes(lan);\r\n    const langRes = isExist ? lan : \"en\";\r\n    return langRes.toUpperCase();\r\n  };\r\n  const toggleDropdown = (e) => {\r\n    e.stopPropagation();\r\n    setIsDropdownOpen((prev) => !prev);\r\n  };\r\n\r\n  const handleClose = (e) => {\r\n    if (barPopoverRef.current && !barPopoverRef.current.contains(e.target)) {\r\n      setIsDropdownOpen(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className={css.languageSwitcher}>\r\n      <button\r\n        onClick={toggleDropdown}\r\n        className={css.currentLanguage}\r\n        name=\"openPopover\"\r\n      >\r\n        {lanString(i18next.language)}\r\n        <svg className={clsx(css.icon, { [css.isOpen]: isDropdownOpen })}>\r\n          <use xlinkHref={svgIcons + \"#icon-chevron-down\"}></use>\r\n        </svg>\r\n      </button>\r\n      {isDropdownOpen && (\r\n        <LanguageSwitcherBar onClose={handleClose} ref={barPopoverRef} />\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LanguageSwitcher;\r\n"],"names":["LanguageSwitcherBar","forwardRef","onClose","ref","langs","LOCALS","handleLanguageChange","lng","i18next","useEffect","jsx","css","len","LanguageSwitcher","isDropdownOpen","setIsDropdownOpen","useState","barPopoverRef","useRef","lanString","lan","toggleDropdown","e","prev","handleClose","jsxs","clsx","svgIcons"],"mappings":"4UAKMA,EAAsBC,EAAW,WAAA,SACrC,CAAE,QAAAC,CAAA,EACFC,EACA,CACM,MAAAC,EAAQ,OAAO,OAAOC,CAAM,EAE5BC,EAAwBC,GAAQ,CACpCC,EAAQ,eAAeD,CAAG,EAC1BL,EAAQ,EAAK,CAAA,EAGfO,OAAAA,EAAAA,UAAU,KACD,OAAA,iBAAiB,QAASP,CAAO,EACjC,IAAM,OAAO,oBAAoB,QAASA,CAAO,GACvD,CAACA,EAASC,CAAG,CAAC,EAGfO,EAAAA,IAAC,KAAG,CAAA,UAAWC,EAAI,WAAY,IAAAR,EAC5B,SAAAC,EAAM,IAAKQ,GACVF,EAAA,IAAC,KACC,CAAA,SAAAA,EAAA,IAAC,SAAA,CACC,UAAWC,EAAI,OACf,QAAS,IAAML,EAAqBM,CAAG,EAEtC,WAAI,kBAAkB,CAAA,CAAA,GALlBA,CAOT,CACD,CACH,CAAA,CAEJ,CAAC,EC5BKC,EAAmB,IAAM,CAC7B,KAAM,CAACC,EAAgBC,CAAiB,EAAIC,WAAS,EAAK,EACpDC,EAAgBC,SAAO,IAAI,EAE3BC,EAAaC,IACH,OAAO,OAAOf,CAAM,EACZ,SAASe,CAAG,EACRA,EAAM,MACjB,cAEXC,EAAkBC,GAAM,CAC5BA,EAAE,gBAAgB,EACAP,EAACQ,GAAS,CAACA,CAAI,CAAA,EAG7BC,EAAeF,GAAM,CACrBL,EAAc,SAAW,CAACA,EAAc,QAAQ,SAASK,EAAE,MAAM,GACnEP,EAAkB,EAAK,CACzB,EAGF,OACGU,EAAAA,KAAA,MAAA,CAAI,UAAWd,EAAI,iBAClB,SAAA,CAAAc,EAAA,KAAC,SAAA,CACC,QAASJ,EACT,UAAWV,EAAI,gBACf,KAAK,cAEJ,SAAA,CAAAQ,EAAUX,EAAQ,QAAQ,QAC1B,MAAI,CAAA,UAAWkB,EAAKf,EAAI,KAAM,CAAE,CAACA,EAAI,MAAM,EAAGG,CAAA,CAAgB,EAC7D,SAAAJ,EAAAA,IAAC,OAAI,UAAWiB,EAAW,oBAAsB,CAAA,EACnD,CAAA,CAAA,CACF,EACCb,GACEJ,EAAA,IAAAV,EAAA,CAAoB,QAASwB,EAAa,IAAKP,EAAe,CAEnE,CAAA,CAAA,CAEJ"}